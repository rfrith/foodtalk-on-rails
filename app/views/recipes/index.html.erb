<%= render partial: 'shared/fancybox_bootstrap_fix' %>

<% cache [create_cache_key_prefix, "recipes-index-#{@slug}"], :expires_in => 1.day do %>
  <div id="recipes" class="content-section2">
    <% if @posts %>
      <%= render partial: 'shared/posts_index_header', locals: {icon: "recipe-graphic-sm.png", title: t("recipes.name"), description: t("recipes.description"), index_path: "recipes_path", search_label: t("recipes.search"), slugs: @tags} %>
      <div id="recipes-grid" class="grid">
        <%= render partial: 'shared/post', collection: @posts, cached: true, locals: {index_path: "recipes_path", show_path: "show_recipe_path", slugs: @tags, post_slugs: "post['tags']"} %>
      </div>
    <% else %>
      <div class="d-flex justify-content-center">
        <div class="media align-items-center mt-4 ml-5 mr-5">
          <% #TODO: I18n ME! %>
          Error displaying recipes.
        </div>
      </div>
    <% end %>
  </div>
<% end %>

<%= render partial: 'shared/infinite_scroll', cached: true, locals: {page_path: "recipe_load_page_path"} %>
<%= render partial: 'shared/fancybox_bootstrap_fix' %>

<% cache [create_cache_key_prefix, "blog-index-#{@slug}"], :expires_in => 1.day do %>

  <div id="blogs" class="content-section2">

  <% if @posts %>

    <%= render partial: 'shared/post_header', locals: {title: t("blog.name"), description: t("blog.description"), index_path: "blogs_index_path", search_label: t("blog.search"), slugs: @categories} %>

    <div id="posts-grid" class="grid">
      <%= render partial: 'shared/post', collection: @posts, cached: true, locals: {index_path: "blogs_index_path", show_path: "show_blog_path", slugs: @categories, post_slugs: "post['categories']"} %>
    </div>

    <%= render partial: 'shared/infinite_scroll', locals: {page_path: "blog_load_page_path"} %>

  <% else %>
    <div class="d-flex justify-content-center">
      <div class="media align-items-center mt-4 ml-5 mr-5">
        <% #TODO: I18n ME! %>
        Error displaying Blog.
      </div>
    </div>
  <% end %>

  </div>

<% end %>
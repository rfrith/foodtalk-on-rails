<div id="lessons" class="container-fluid">
  <div class="row content-section2 pb-5">
    <div class="col">

      <div id="user-info" class="user-info">
        <div class="mt-1">
          <nav class="nav nav-tabs ml-5 justify-content-end" id="dashboard-nav" role="tablist">
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">My Courses</a>
              <div class="dropdown-menu">
                <a class="dropdown-item" data-toggle="tab" href="#continue-learning-tab">Started Courses</a>
                <a class="dropdown-item" data-toggle="tab" href="#completed-learning-tab">Completed Courses</a>
              </div>
            </div>
            <a class="nav-item nav-link active" data-toggle="tab" href="#personal-info-tab" role="tab" aria-controls="personal-info-tab" aria-selected="true">Personal Information</a>
            <a class="nav-item nav-link" data-toggle="tab" href="#mail-subscriptions-tab" role="tab" aria-controls="subscriptions-tab" aria-selected="false">Newsletter Subscriptions</a>
          </nav>



          <div class="tab-content d-flex justify-content-center">



            <% #Started Lessons %>
            <div class="tab-pane fade show" id="continue-learning-tab" role="tabpanel" aria-labelledby="continue-learning-tab">

              <div class="content-section-copy-dark">Started Courses</div>

              <% # Food eTalk Started Lessons %>
              <div id="food-etalk-lessons-started" class="d-flex flex-column pl-5 pr-5 pt-2">
                <div class="d-flex flex-row">
                  <div class="media align-items-top">
                    <%= image_tag 'food-etalk-logo-lg.png', class: 'd-flex d-sm-none d-md-block', alt: 'Food eTalk Logo', style: 'width: auto; height: 6rem;' %>
                    <div class="media-body ml-3">
                      <div class="content-section-title">Food eTalk</div>
                    </div>
                  </div>
                </div>

                <% if(current_user.course_enrollments.food_etalk.started.empty?) %>
                  <span>You have not yet started any Food eTalk lessons.  Why not <%= link_to("choose a lesson now", { controller: "learn_online", action: "index", anchor: 'food-etalk'  }) %>?</span>
                <% else %>
                  <div class="d-flex flex-row">
                    <div class="lead pb-2">You should be proud of all you've learned!</div>
                  </div>
                  <div class="d-flex flex-row">
                    <div class="pt-2">
                      <% current_user.course_enrollments.food_etalk.started.each do |c| %>
                        <%= render :partial => 'learn_online/learning_module_media_object', locals: {lesson: LearningModules::find_module(c.name)} %>
                      <% end %>
                    </div>
                  </div>
                <% end %>
              </div>




              <div id="better-u-lessons-started" class="d-flex flex-column pl-5 pr-5 pt-4">

                <div class="d-flex flex-row">
                  <div class="media align-items-top">
                    <%= image_tag 'better-u-logo.png', class: 'd-flex d-sm-none d-md-block', alt: 'Food eTalk Logo', style: 'width: auto; height: 6rem;' %>
                    <div class="media-body ml-3">
                      <div class="content-section-title">Food Talk Better U</div>
                    </div>
                  </div>
                </div>

                <% if(current_user.course_enrollments.better_u.started.empty?) %>
                  <span>You have not yet started any Better U lessons.  Why not <%= link_to("choose a lesson now", { controller: "learn_online", action: "index", anchor: 'better-u' }) %>?</span>
                <% else %>

                  <div class="d-flex flex-row">
                    <div class="lead pb-2"></div>
                  </div>
                  <div class="d-flex flex-row">
                    <div class="pt-2">
                      <% current_user.course_enrollments.better_u.started.each do |c| %>
                        <%= render :partial => 'learn_online/learning_module_media_object', locals: {lesson: LearningModules::find_module(c.name)} %>
                      <% end %>
                    </div>
                  </div>
                <% end %>


              </div>
            </div>


            <% # Completed Lessons %>
            <div class="tab-pane fade show" id="completed-learning-tab" role="tabpanel" aria-labelledby="completed-learning-tab">

              <div class="content-section-copy-dark">Completed Courses</div>

              <% # Food eTalk Completed Lessons %>
              <div id="food-etalk-lessons-completed" class="d-flex flex-column pl-5 pr-5 pt-2">

              <% if(!current_user.course_enrollments.food_etalk.completed.empty?) %>

                <div class="d-flex flex-row">
                  <div class="media align-items-top">
                    <%= image_tag 'food-etalk-logo-lg.png', class: 'd-flex d-sm-none d-md-block', alt: 'Food eTalk Logo', style: 'width: auto; height: 6rem;' %>
                    <div class="media-body ml-3">
                      <div class="content-section-title">Food eTalk</div>
                    </div>
                  </div>
                </div>

                <div class="d-flex flex-row">
                  <div class="lead pb-2">You should be proud of all you've learned!</div>
                </div>
                <div class="d-flex flex-row">
                  <div class="pt-2">
                    <% current_user.course_enrollments.food_etalk.completed.each do |c| %>
                      <%= render :partial => 'learn_online/learning_module_media_object', locals: {lesson: LearningModules::find_module(c.name)} %>
                    <% end %>
                  </div>
                </div>
              <% end %>
              </div>


              <% # Better U Completed Lessons %>
              <div id="better-u-lessons-completed" class="d-flex flex-column pl-5 pr-5 pt-4">

              <% if(!current_user.course_enrollments.better_u.completed.empty?) %>

                <div class="d-flex flex-row">
                  <div class="media align-items-top">
                    <%= image_tag 'better-u-logo.png', class: 'd-flex d-sm-none d-md-block', alt: 'Food eTalk Logo', style: 'width: auto; height: 6rem;' %>
                    <div class="media-body ml-3">
                      <div class="content-section-title">Food Talk Better U</div>
                    </div>
                  </div>
                </div>


                <div class="d-flex flex-row">
                  <div class="lead pb-2"></div>
                </div>
                <div class="d-flex flex-row">
                  <div class="pt-2">
                    <% current_user.course_enrollments.better_u.completed.each do |c| %>
                      <%= render :partial => 'learn_online/learning_module_media_object', locals: {lesson: LearningModules::find_module(c.name)} %>
                    <% end %>
                  </div>
                </div>
              <% end %>
              </div>
            </div>


            <div class="tab-pane fade show active personal-info-tab" id="personal-info-tab" role="tabpanel" aria-labelledby="personal-info-tab">
              <div class="pt-2">
                <h2>Please ensure your personal information is correct and up-to-date.</h2>
              </div>
              <div>
                <div id="user-form-alert" class="alert visible" role="alert"></div>
                <%= render :partial => "users/form" %>
                <div class="mb-5">&nbsp;</div>
                <div class="mb-5">&nbsp;</div>
              </div>
            </div>

            <div class="tab-pane fade" id="mail-subscriptions-tab" role="tabpanel" aria-labelledby="mail-subscriptions-tab">
              <div class="pt-2">
                <h2>Please choose which of these lists you'd like to receive emails from.</h2>
              </div>
              <%= render :partial => "subscriptions/form" %>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="recipes" class="row content-section">

  <div class="col">

    <div class="d-flex justify-content-center mx-auto">
      <div class="media content-section-header align-items-center">

        <%= image_tag 'recipe-graphic.png', class: 'd-flex d-sm-none d-md-block mt-2 mr-3', alt: 'Recipe Card Icon', style: 'width: auto; height: 6rem;' %>
        <div class="media-body ml-3">
          <span class="content-section-title">Featured Recipes</span>
          <p class="content-section-copy-light">Our FoodTalk recipes contain delicious, healthy, and inexpensive meals!</p>
        </div>
      </div>
    </div>

    <div id="recipesCarousel" class="carousel slide" data-ride="carousel"  data-interval="false">

      <div class="carousel-inner" role="listbox">
        <%
          #TODO: FIX ME!  We want Featured Recipes Here
          #TODO: AJAXIFY ME!
          #TODO: put me in a helper
          per_page = 3
          total_pgs = Recipe.page(1).per(per_page).total_pages
          total_pgs_to_show = 2
          i = 1
          while i <= total_pgs_to_show && i <= total_pgs
            recipes = Recipe.page(i).per(per_page)
        %>
            <div class="carousel-item <%= 'active' if i == 1%>">
              <div class="d-flex justify-content-center">
                <div class="card-deck recipes-deck" >
                  <% recipes.each do |recipe| %>
                      <%= render :partial => "recipes/recipe_card", locals: {recipe: recipe, card_width: '22rem;'} %>
                  <% end %>
                </div>
              </div>
            </div>
        <%
          i += 1
          end
        %>

        <a class="carousel-control-prev" href="#recipesCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>

        <a class="carousel-control-next" href="#recipesCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

    </div>

    <p class="justify-content-center mx-auto content-section-copy-light recipe-copy text-center pt-2"><%= link_to "Click Here", recipes_path %> to browse our entire catalog.</p>

    <% render partial: "welcome/scroll-down-for-more" %>

  </div>

</div>
